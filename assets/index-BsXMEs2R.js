import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-BJAUJQE_.js";import{c6 as L,bJ as V,c7 as G,d as J,aM as j,aN as q,c8 as Q,aa as E,ab as F,ar as H,aS as K,a9 as U,an as W}from"./antd-3rLJf0bF.js";import{q as u}from"./index-D9D5W6cL.js";import{d as X,f as i,r as Z,o as tt,a5 as et,ac as nt,ad as e,k as t,G as c,af as y,u as a,a8 as f}from"./vue-DIvP5FMT.js";import"./context-CR6il0tm.js";function at(h){return u("/user/invite/list",h,{customDev:!0})}function ot(){return u("/invite/link",null,{customDev:!0})}function st(){return u("/invite/state",null,{customDev:!0})}function it(){return u("/payback/setting",null,{customDev:!0})}function lt(){return u("/payback/topIncome",null,{customDev:!0})}const ct=f("span",{"text-20px":"","line-height-32px":"","mr-12px":"","mb-0":"",truncate:"","font-600":""},"我的推广",-1),ut={style:{"text-align":"center",width:"60%",margin:"0 auto"}},rt=f("span",{style:{"font-size":"14px",color:"rgba(0, 0, 0, 0.45)"}}," 我的推广链接 ",-1),_t=f("br",null,null,-1),vt=X({name:"Invite",__name:"index",setup(h){const S=i(""),r=i(),b=i(!0),m=i(),s=Z({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`${n}条记录`,onChange(n,D){s.pageSize=D,s.current=n,I()}}),_=i(!1),k=i([]);async function C(){const{data:n}=await ot();S.value=n}async function M(){const{data:n}=await st();r.value=n,b.value=!1}async function A(){const{data:n}=await it();m.value=n}const O=[{title:"推荐用户",dataIndex:"username",customRender:({text:n})=>n??"已注销"},{title:"购买时间",dataIndex:"datetime",customRender:({text:n})=>J(n).format("YYYY-MM-DD")},{title:"收入",dataIndex:"income",customRender:({text:n})=>`${n}元`}];async function I(){if(!_.value){_.value=!0;try{const{data:n}=await at({size:s.pageSize,current:s.current});k.value=n.records??[],s.total=n.total,s.pageSize=n.size,s.current=n.current}catch{}finally{_.value=!1}}}const p=i(!1),T=[{title:"用户名",dataIndex:"username"},{title:"累计收益",dataIndex:"income",customRender:({text:n})=>`${n}元`}],w=i([]);async function B(){if(!p.value){p.value=!0;try{const{data:n}=await lt();w.value=n}finally{p.value=!1}}}return tt(()=>{I(),C(),M(),A(),B()}),(n,D)=>{const g=j,N=q,v=Q,l=E,d=F,P=H,R=K,x=U,z=W,Y=$;return et(),nt(Y,null,{title:e(()=>[ct]),content:e(()=>[t(N,{title:"推荐规则明细",bordered:""},{default:e(()=>[t(g,{label:"好友获得"},{default:e(()=>{var o;return[c(y((o=a(m))==null?void 0:o.friendMoney)+"元账户余额",1)]}),_:1}),t(g,{label:"你将获得"},{default:e(()=>{var o;return[c("好友 "+y((o=a(m))==null?void 0:o.selfPercent)+"% 的充值奖励",1)]}),_:1}),t(g,{label:"截止日期"},{default:e(()=>[c("永久有效")]),_:1})]),_:1})]),default:e(()=>[t(d,{gutter:24},{default:e(()=>[t(l,{span:"24"},{default:e(()=>[t(x,null,{default:e(()=>[t(R,{spinning:a(b)},{default:e(()=>[t(d,{gutter:[16,16]},{default:e(()=>[t(l,{xs:24,sm:8,align:"center"},{default:e(()=>{var o;return[t(v,{align:"center",title:"我的推荐人数",value:(o=a(r))==null?void 0:o.invitePsnCount,suffix:"人","value-style":{color:"#cf1322"}},{prefix:e(()=>[t(a(L))]),_:1},8,["value"])]}),_:1}),t(l,{xs:24,sm:8,align:"center"},{default:e(()=>{var o;return[t(v,{align:"center",title:"我的累计收益",value:(o=a(r))==null?void 0:o.totalMoney,suffix:"元","value-style":{color:"#3f8600"}},{prefix:e(()=>[t(a(V))]),_:1},8,["value"])]}),_:1}),t(l,{xs:24,sm:8,align:"center"},{default:e(()=>{var o;return[t(v,{align:"center",title:"我的平均收益",value:(o=a(r))==null?void 0:o.avgMoney,suffix:"元/人","value-style":{color:"#1677ff"}},{prefix:e(()=>[t(a(G))]),_:1},8,["value"])]}),_:1})]),_:1}),t(d,null,{default:e(()=>[t(l,{span:24,"mt-5":""},{default:e(()=>[f("div",ut,[rt,_t,t(P,{copyable:""},{default:e(()=>[c(y(a(S)),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1})]),_:1})]),_:1}),t(d,{gutter:24},{default:e(()=>[t(l,{"mt-5":"",xs:{span:24},sm:{span:24},md:{span:12},lg:{span:8},xl:{span:8}},{default:e(()=>[t(x,{title:"推荐收益TOP10"},{extra:e(()=>[c(" 统计周期1个月 ")]),default:e(()=>[t(z,{loading:a(p),columns:T,"data-source":a(w)},null,8,["loading","data-source"])]),_:1})]),_:1}),t(l,{"mt-5":"",xs:{span:24},sm:{span:24},md:{span:12},lg:{span:16},xl:{span:16}},{default:e(()=>[t(x,{title:"我的推荐"},{default:e(()=>[t(z,{loading:a(_),columns:O,"data-source":a(k),pagination:a(s)},null,8,["loading","data-source","pagination"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{vt as default};

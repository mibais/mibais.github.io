import{j as Q,a as L,_ as J}from"./index-PoV8YKeN.js";import{P as K,a as X}from"./index-DZhJ7BAv.js";import{a9 as Z,ap as ee,d as U,aQ as te,bt as ae,bn as oe,ag as ne,bu as se,aa as le,ab as re}from"./antd-9nlSCyVV.js";import{d as j,a5 as g,ac as A,ad as e,a8 as a,af as r,U as D,ai as ie,f as m,s as G,c as ue,o as ce,j as de,ab as fe,k as t,aw as I,ax as S,G as c,u as l,a3 as T,F as B}from"./vue-BVKynzoK.js";import{F as P}from"./field-qY__u36U.js";import F from"./trend-CUsofOQV.js";import{p as pe}from"./bought-CEgo6Nha.js";import{s as _e,u as me}from"./user-DR1ZaQWY.js";import{b as ge}from"./tools-BUV-nHMd.js";const he={class:"chartCard"},ve={class:"chartTop"},ye={class:"metaWrap"},be={class:"meta"},xe={class:"title"},we={class:"action"},Ce={class:"total"},De={class:"contentFixed"},Ie={class:"footer"},Se=j({__name:"chart-card",props:{loading:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},title:{type:String,default:""},total:{type:Number},contentHeight:{type:Number}},setup(s){const k=s;return(i,M)=>{const p=Z;return g(),A(p,{bind:k,"body-style":{padding:"20px 24px 8px 24px"}},{default:e(()=>[a("div",he,[a("div",ve,[a("div",ye,[a("div",be,[a("span",xe,r(s.title),1),a("span",we,[D(i.$slots,"action",{},void 0,!0)])]),a("div",Ce,[D(i.$slots,"total",{},void 0,!0)])])]),a("div",{class:"content",style:ie({height:`${s.contentHeight}px`||"auto"})},[a("div",De,[D(i.$slots,"default",{},void 0,!0)])],4),a("div",Ie,[D(i.$slots,"footer",{},void 0,!0)])])]),_:3},8,["bind"])}}}),R=Q(Se,[["__scopeId","data-v-54870cd0"]]),Re=a("span",null,"尚未购买",-1),ke=a("span",null,"已到期",-1),$e={style:{whiteSpace:"nowrap",overflow:"hidden"}},Te={class:"trendText"},Be={class:"trendText"},Pe={style:{whiteSpace:"nowrap",overflow:"hidden"}},Fe={class:"trendText"},We=j({__name:"brief-card",props:{loading:{type:Boolean,default:!1},trafficInfo:{type:Object,default:()=>({pastTrafficGB:"",todayTrafficGB:"",daySameRate:"",nextRestDate:"",totalTrafficGB:"",weekSameRate:""})}},emits:["planInfo"],setup(s,{emit:k}){const i=s,M=k,p=L();function Y(o){return o.startsWith("-")?"down":"up"}const h=ee({scriptUrl:J(()=>import("./iconfont-B_hmDsvv.js"),__vite__mapDeps([]))}),v={xs:24,sm:12,md:12,lg:12,xl:6,style:{marginBottom:"24px"}},N=m(),O=m(),u=m({expireDate:"",leftDay:0,leftDayPercent:0,planName:""}),y=G(),b=G();async function V(){const{data:o}=await pe();u.value=o,u.value.expireDate=o!=null&&o.expireDate?U(o.expireDate).format("YYYY-MM-DD"):"",M("planInfo",u.value)}const W=ue(()=>i.trafficInfo.nextRestDate?U(i.trafficInfo.nextRestDate).format("YYYY-MM-DD"):"无"),_=m([0,0]);async function z(){var d;const{data:o}=await _e();_.value=o,y.value=new X(N.value,{height:46,autoFit:!0,data:_.value}),(d=y.value)==null||d.render()}const x=m();async function E(){const{data:o}=await me();x.value=o}return ce(()=>{var o;V(),z(),E(),b.value=new K(O.value,{height:46,autoFit:!0,percent:.78,barWidthRatio:.2,color:"#13C2C2"}),(o=b.value)==null||o.render()}),de(()=>{var o,d;(o=y.value)==null||o.destroy(),y.value=void 0,(d=b.value)==null||d.destroy(),b.value=void 0}),(o,d)=>{const $=fe("router-link"),w=ne,q=se,C=le,H=re;return g(),A(H,{gutter:24},{default:e(()=>[t(C,I(S({...v})),{default:e(()=>[t(R,{bordered:!1,title:"会员时长",loading:s.loading,"content-height":46},{action:e(()=>[t(w,{title:"点我去购买套餐"},{default:e(()=>[t($,{to:"/bought/shop"},{default:e(()=>[c("购买")]),_:1})]),_:1})]),total:e(()=>{var n;return[["excess","paid"].includes(l(p).userInfo.status)?(g(),T(B,{key:0},[t(l(h),{"mr-2":"",type:"icon-31huiyuan"}),a("span",null,r(u.value.leftDay>0?`${u.value.leftDay}天`:"长期有效"),1)],64)):((n=l(p).userInfo)==null?void 0:n.status)==="normal"?(g(),T(B,{key:1},[t(l(te)),Re],64)):(g(),T(B,{key:2},[t(l(ae)),ke],64))]}),footer:e(()=>[t(P,{label:"过期时间",value:`${u.value.expireDate}`},null,8,["value"])]),default:e(()=>{var n;return[t(q,{"stroke-color":{from:"#108ee9",to:"#87d068"},percent:u.value.leftDayPercent,status:((n=l(p).userInfo)==null?void 0:n.status)==="expire"?"exception":"normal"},null,8,["percent","status"])]}),_:1},8,["loading"])]),_:1},16),t(C,I(S({...v})),{default:e(()=>[t(R,{bordered:!1,title:"流量信息",loading:s.loading,"content-height":46},{action:e(()=>[t(w,{title:"点我去充值流量"},{default:e(()=>[t($,{to:{path:"/bought/shop",query:{buyTrafficPackage:"true"}}},{default:e(()=>[c("充值")]),_:1})]),_:1})]),total:e(()=>{var n;return[t(l(h),{"mr-2":"",type:"icon-liuliang1"}),a("span",null,r(l(ge)((n=s.trafficInfo)==null?void 0:n.leftTrafficGB)),1)]}),footer:e(()=>[t(P,{label:"流量重置日",value:l(W)},null,8,["value"])]),default:e(()=>[a("div",$e,[t(F,{flag:Y(s.trafficInfo.weekSameRate),style:{marginRight:"16px"}},{default:e(()=>[c(" 周同比 "),a("span",Te,r(s.trafficInfo.weekSameRate),1)]),_:1},8,["flag"]),t(F,{flag:Y(s.trafficInfo.daySameRate)},{default:e(()=>[c(" 日同比 "),a("span",Be,r(s.trafficInfo.daySameRate),1)]),_:1},8,["flag"])])]),_:1},8,["loading"])]),_:1},16),t(C,I(S({...v})),{default:e(()=>[t(R,{bordered:!1,title:"订阅次数",loading:s.loading,"content-height":46},{action:e(()=>[t(w,{title:"你最近14日的订阅次数统计"},{default:e(()=>[t(l(oe))]),_:1})]),total:e(()=>[t(l(h),{"mr-2":"",type:"icon-dingyue"}),a("span",null,r(_.value.reduce((n,f)=>n+f)),1),c(" 次 ")]),footer:e(()=>[t(P,{label:"平均日订阅",value:(_.value.reduce((n,f)=>n+f)/_.value.length).toString()},null,8,["value"])]),default:e(()=>[a("div",{ref_key:"tinyColumnContainer",ref:N},null,512)]),_:1},8,["loading"])]),_:1},16),t(C,I(S({...v})),{default:e(()=>[t(R,{bordered:!1,title:"钱包余额",loading:s.loading,"content-height":46},{action:e(()=>[t(w,{title:"点我去充值余额"},{default:e(()=>[t($,{to:"/charge/wallet"},{default:e(()=>[c("充值")]),_:1})]),_:1})]),total:e(()=>{var n;return[t(l(h),{"mr-2":"",type:"icon-qianbao"}),a("span",null,r(`${(n=x.value)==null?void 0:n.money}元`),1)]}),footer:e(()=>{var n;return[a("div",Pe,[t(F,{flag:(n=x.value)!=null&&n.whetherUp?"up":"down",style:{marginRight:"16px"}},{default:e(()=>{var f;return[c(" 月同比 "),a("span",Fe,r((f=x.value)==null?void 0:f.rate),1)]}),_:1},8,["flag"])])]}),default:e(()=>[a("div",{ref_key:"progressContainer",ref:O},null,512)]),_:1},8,["loading"])]),_:1},16)]),_:1})}}});export{We as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

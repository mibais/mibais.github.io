import{l as C}from"./login-slot-bT9D4sp-.js";import{f as E,_ as c,n as A}from"./index-CosWhGyj.js";import{W as T,X as U,U as h,E as I,G as V,Y as L,K as q,N,O as z,Q as D,V as S,m as $,F}from"./antd-9nlSCyVV.js";import{d as R,s as g,a5 as v,ac as y,u as e,ap as G,f as b,o as M,ad as a,G as x,k as t,ag as Q}from"./vue-BVKynzoK.js";import{g as Y}from"./tools-Bcs-_yI_.js";import"./index.vue_vue_type_script_setup_true_lang-uT7FZuiR.js";import"./login-left-BcHXzO7d.js";import"./logo-B20em0cI.js";const j=R({__name:"index",props:{registerParam:{type:Object,required:!0}},emits:["beforeVerify"],setup(w,{expose:u,emit:o}){const p={aliYun:()=>c(()=>import("./aliYun-captcha-IOJ3poWS.js"),__vite__mapDeps([0,1,2,3,4])),geetest:()=>c(()=>import("./geetest-xim-W0av.js"),__vite__mapDeps([5,6,1,2,3,4])),sys:()=>c(()=>import("./original-D4AUHgdh.js"),__vite__mapDeps([7,1,2,3,4]))},_=o,f=G(()=>new Promise(async l=>{const{data:s}=await E();l(p[s]())}));function d(l){l.res&&T.success({message:"注册成功",description:"即将跳转前登陆页",duration:2,onClose(){window.location.href="/login"}})}const r=g();function n(){r.value.passValid()}return u({passValid:n}),(l,s)=>(v(),y(e(f),{ref_key:"registerButtonRef",ref:r,registerParam:w.registerParam,registerText:"立即注册",onSubmit:d,onBeforeVerify:s[0]||(s[0]=m=>_("beforeVerify"))},null,8,["registerParam"]))}}),ae=R({__name:"register",setup(w){const u=b(""),o=b({username:"",email:"",password:"",confirmPassword:"",inviteCode:""}),p=g(),_=g();async function f(){const r=Y("code");if(r){o.value.inviteCode=r;const{data:n}=await A(r);u.value=n}}async function d(){await p.value.validate(),_.value.passValid()}return M(()=>{f()}),(r,n)=>{const l=q,s=N,m=z,P=D,k=S,B=$,O=F;return v(),y(C,null,{title:a(()=>[x(" 开始注册 ")]),default:a(()=>[t(O,{ref_key:"formRef",ref:p,layout:"horizontal","label-col":{style:{width:"80px"}},model:e(o)},{default:a(()=>[e(u)?(v(),y(l,{key:0,"mb-24px":"",message:`你正在由 ${e(u)} 推荐`,type:"success","show-icon":""},{icon:a(()=>[t(e(U))]),_:1},8,["message"])):Q("",!0),t(m,{label:"昵称",name:"username"},{default:a(()=>[t(s,{value:e(o).username,"onUpdate:value":n[0]||(n[0]=i=>e(o).username=i),placeholder:"你的昵称"},{prefix:a(()=>[t(e(h))]),_:1},8,["value"])]),_:1}),t(m,{label:"邮箱",name:"email",rules:[{required:!0,message:"请补全邮箱"}]},{default:a(()=>[t(s,{value:e(o).email,"onUpdate:value":n[1]||(n[1]=i=>e(o).email=i),placeholder:"输入邮箱"},{prefix:a(()=>[t(e(I))]),_:1},8,["value"])]),_:1}),t(m,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:a(()=>[t(P,{value:e(o).password,"onUpdate:value":n[2]||(n[2]=i=>e(o).password=i),placeholder:"输入密码"},{prefix:a(()=>[t(e(V))]),_:1},8,["value"])]),_:1}),t(m,{label:"确认密码",name:"confirmPassword",rules:[{required:!0,message:"请再次输入密码"}]},{default:a(()=>[t(P,{value:e(o).confirmPassword,"onUpdate:value":n[3]||(n[3]=i=>e(o).confirmPassword=i),placeholder:"再次输入密码"},{prefix:a(()=>[t(e(V))]),_:1},8,["value"])]),_:1}),t(B,{"ml-5":"",size:"large",wrap:""},{default:a(()=>[t(j,{ref_key:"registerButtonRef",ref:_,"register-param":e(o),onBeforeVerify:d},null,8,["register-param"]),t(k,{type:"default",size:"large",href:"/login"},{icon:a(()=>[t(e(L))]),default:a(()=>[x(" 返回登陆 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}});export{ae as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/aliYun-captcha-IOJ3poWS.js","assets/index-CosWhGyj.js","assets/vue-BVKynzoK.js","assets/antd-9nlSCyVV.js","assets/index-TCS7UFXs.css","assets/geetest-xim-W0av.js","assets/geetest-captcha.vue_vue_type_script_setup_true_lang-5NxM30xX.js","assets/original-D4AUHgdh.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

import{_ as C}from"./index.vue_vue_type_script_setup_true_lang-ChuEzVa1.js";import{d as S,ao as b,K as v,an as T,a9 as q,aa as B,ab as D}from"./antd-DWod4DQe.js";import{k as N}from"./index-DA0uWrIu.js";import{d as V,f as c,r as Y,o as M,ab as $,a5 as p,ac as F,ad as e,k as n,a8 as s,G as i,u as o,a3 as H,F as L,af as j,ag as A}from"./vue-DIvP5FMT.js";import"./index-BhAGI5mP.js";import"./context-BiCfceRa.js";const E=s("span",{"text-20px":"","line-height-32px":"","mr-12px":"","mb-0":"",truncate:"","font-600":""},"订阅记录",-1),G=s("li",null,"订阅记录只保留 7 日",-1),W=V({__name:"subLog",setup(J){const r=c(!1),d=c([{title:"ID",dataIndex:"id",width:100},{title:"客户端",dataIndex:"clientType",width:100},{title:"IP",dataIndex:"requestIp",width:300},{title:"地点",dataIndex:"address",width:200},{title:"日期",dataIndex:"requestTime",width:200}]),_=c(),a=Y({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`${t}条记录`,onChange(t,u){a.pageSize=u,a.current=t,l()}});async function l(){if(!r.value){r.value=!0;try{const{data:t}=await N({size:a.pageSize,current:a.current});_.value=t.records,a.total=t.total,a.pageSize=t.size,a.current=t.current}finally{r.value=!1}}}return M(()=>{l()}),(t,u)=>{const m=$("router-link"),g=b,f=v,h=T,x=q,w=B,y=D,k=C;return p(),F(k,null,{title:e(()=>[E]),default:e(()=>[n(f,{message:"提示",type:"info","show-icon":""},{description:e(()=>[s("p",null,[n(g,null,{default:e(()=>[s("ul",null,[s("li",null,[i(" 如果你觉得订阅被盗用，可以前往 "),n(m,{to:"/account/setting?key=5"},{default:e(()=>[i(" 订阅保护 ")]),_:1}),i(" 进行管理 ")]),G])]),_:1})])]),_:1}),n(y,{"mt-5":""},{default:e(()=>[n(w,{span:24},{default:e(()=>[n(x,{title:"订阅明细"},{default:e(()=>[n(h,{loading:o(r),columns:o(d),"data-source":o(_),pagination:o(a)},{bodyCell:e(({column:I,record:z})=>[I.dataIndex==="requestTime"?(p(),H(L,{key:0},[i(j(o(S)(z.requestTime).format("YYYY-MM-DD HH:mm:ss")),1)],64)):A("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{W as default};

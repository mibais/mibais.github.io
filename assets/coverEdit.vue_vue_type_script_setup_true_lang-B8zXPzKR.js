import{e as R,v as z,u as F}from"./shop-Dptp6kgK.js";import{u as V}from"./index-CB972hdw.js";import{K as j,N as E,aa as G,aJ as H,aK as J,ab as O,av as T,aU as X,aX as $,as as D,aS as L,S as P,m as Q,F as W}from"./antd-CrhK6lnF.js";import{d as Y,f as d,o as Z,a5 as ee,ac as ae,ad as a,k as e,u as l,G as i,H as ne}from"./vue-DIvP5FMT.js";const ue=Y({__name:"coverEdit",props:{coverId:{type:Number,default:null}},emits:["closeModal"],setup(b,{emit:I}){const c=b,x=I,t=d({shopName:"",cycle:"ÊØèÊúà",category:"",price:0,linkShopId:[],orderIndex:0,item:[]}),p=d(""),m=d([]),f=d(!0);function v(s){x("closeModal",s)}async function w(){const{data:s}=await R();m.value=s.map(n=>({key:n.id.toString(),title:n.name})),f.value=!1}async function N(){const{data:s}=await z(c.coverId);t.value=s,p.value=s.item.join(`
`)}async function U(){t.value.item=p.value.split(/[\s\n]/),await F(t.value),V().success(c.coverId?"‰øùÂ≠òÊàêÂäüüòÑ":"Ê∑ªÂä†ÊàêÂäüüëè"),v(1)}return Z(()=>{c.coverId&&N(),w()}),(s,n)=>{const g=j,u=E,r=G,y=H,C=J,_=O,k=T,h=X,q=$,M=D,A=L,S=P,B=Q,K=W;return ee(),ae(K,{model:l(t),layout:"vertical"},{default:a(()=>[e(_,{gutter:16},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(u,{label:"ÂêçÁß∞",name:"shopName",rules:[{required:!0,message:"ÂïÜÂìÅÂêç‰∏çËÉΩ‰∏∫Á©∫"}]},{default:a(()=>[e(g,{value:l(t).shopName,"onUpdate:value":n[0]||(n[0]=o=>l(t).shopName=o)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(u,{label:"ÂàÜÁ±ª",name:"category",rules:[{required:!0,message:"ÂàÜÁ±ª‰∏çËÉΩ‰∏∫Á©∫"}]},{default:a(()=>[e(C,{value:l(t).category,"onUpdate:value":n[1]||(n[1]=o=>l(t).category=o)},{default:a(()=>[e(y,{value:"cycle"},{default:a(()=>[i("Âæ™ÁéØ")]),_:1}),e(y,{value:"once"},{default:a(()=>[i("‰∏ÄÊ¨°ÊÄß")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(r,{span:8},{default:a(()=>[e(u,{label:"Âë®Êúü",name:"cycle",rules:[{required:!0,message:"Âë®Êúü‰∏çËÉΩ‰∏∫Á©∫"}]},{default:a(()=>[e(g,{value:l(t).cycle,"onUpdate:value":n[2]||(n[2]=o=>l(t).cycle=o)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(u,{label:"‰ª∑Ê†º",name:"price",rules:[{required:!0,message:"‰ª∑Ê†º‰∏çËÉΩ‰∏∫Á©∫"}]},{default:a(()=>[e(k,{value:l(t).price,"onUpdate:value":n[3]||(n[3]=o=>l(t).price=o)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(u,{label:"ÊéíÂ∫è",name:"orderIndex",rules:[{required:!0,message:"ÊéíÂ∫è‰∏çËÉΩ‰∏∫Á©∫"}]},{default:a(()=>[e(k,{value:l(t).orderIndex,"onUpdate:value":n[4]||(n[4]=o=>l(t).orderIndex=o)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(r,{span:24},{default:a(()=>[e(u,{label:"È°πÁõÆ",name:"item",rules:[{required:!0,message:"‰ª∑Ê†º‰∏çËÉΩ‰∏∫Á©∫"}]},{default:a(()=>[e(h,{value:l(p),"onUpdate:value":n[5]||(n[5]=o=>ne(p)?p.value=o:null),placeholder:"ËæìÂÖ•ÂàóË°®È°πÁõÆ","auto-size":{minRows:4,maxRows:10}},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(r,{span:24},{default:a(()=>[e(A,{spinning:l(f)},{default:a(()=>[e(u,{label:"ÂÖ≥ËÅîÂïÜÂìÅ",name:"linkShopId"},{default:a(()=>[e(q,{"target-keys":l(t).linkShopId,"onUpdate:targetKeys":n[6]||(n[6]=o=>l(t).linkShopId=o),"data-source":l(m),render:o=>o.title,titles:["ÂïÜÂìÅÂ∫ì","ÂÖ≥ËÅîÁöÑÂïÜÂìÅ"],pagination:""},null,8,["target-keys","data-source","render"]),e(M,{"un-checked-children":"enabled","checked-children":"disabled",style:{"margin-top":"16px"}})]),_:1})]),_:1},8,["spinning"])]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(B,{size:"middle"},{default:a(()=>[e(S,{type:"primary",onClick:U},{default:a(()=>[i(" Êèê‰∫§ ")]),_:1}),e(S,{type:"default",onClick:n[7]||(n[7]=o=>v(0))},{default:a(()=>[i(" ÂèñÊ∂à ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});export{ue as _};

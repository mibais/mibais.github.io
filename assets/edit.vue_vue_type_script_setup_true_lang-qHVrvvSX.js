import{q as v,s as G,u as A}from"./index-4TapthzT.js";import{N as I,O as V,aa as q,aJ as D,aK as z,av as L,ab as M,F as T,aS as F,V as O,m as j}from"./antd-DWod4DQe.js";import{d as E,f as S,o as H,a5 as J,a3 as K,k as e,ad as a,u as l,G as o,a8 as P,af as $}from"./vue-DIvP5FMT.js";function ee(d){return v("/admin/node/list",{current:d.current,size:d.size,...d.param},{customDev:!0})}function Q(d){return v("/admin/node/view",{nodeId:d},{customDev:!0})}function ae(d){return v("/admin/node/delete",{nodeId:d},{customDev:!0})}function W(d){return G("/admin/node/update",d,{customDev:!0})}const X={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},te=E({__name:"edit",props:{nodeId:{type:Number,default:0}},emits:["handleClose"],setup(d,{emit:U}){const c=d,C=U,g=S(!0),t=S({id:void 0,server:"",trafficRate:0,type:0,status:"",sort:"",info:"",nodeClass:void 0,nodeGroup:0,nodeBandwidthLimit:void 0,bandwidthlimitResetday:0,nodeSpeedlimit:0});function b(f){C("handleClose",f)}async function N(){await W(t.value),A().success("修改成功"),b(1)}async function k(){const{data:f}=await Q(c.nodeId);t.value=f,g.value=!1}return H(()=>{c.nodeId&&k()}),(f,n)=>{const r=I,s=V,i=q,p=D,w=z,m=L,_=M,x=T,B=F,y=O,R=j;return J(),K("div",null,[e(B,{spinning:l(g)},{default:a(()=>[e(x,{model:l(t),layout:"vertical"},{default:a(()=>[e(_,{gutter:16},{default:a(()=>[e(i,{span:8},{default:a(()=>[e(s,{label:"节点名",name:"name",rules:[{required:!0,message:"节点名不能为空"}]},{default:a(()=>[e(r,{value:l(t).name,"onUpdate:value":n[0]||(n[0]=u=>l(t).name=u)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(s,{label:"是否可见",name:"type",rules:[{required:!0,message:"请选择"}]},{default:a(()=>[e(w,{value:l(t).type,"onUpdate:value":n[1]||(n[1]=u=>l(t).type=u)},{default:a(()=>[e(p,{value:1},{default:a(()=>[o(" 显示 ")]),_:1}),e(p,{value:0},{default:a(()=>[o(" 隐藏 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:a(()=>[e(s,{label:"流量倍率",name:"trafficRate",rule:[{require:!0,message:"流量倍率不能为空"}]},{default:a(()=>[e(m,{value:l(t).trafficRate,"onUpdate:value":n[2]||(n[2]=u=>l(t).trafficRate=u),min:0},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(i,{span:24},{default:a(()=>[e(s,{label:"节点地址",name:"server",rule:[{require:!0,message:"节点地址不能为空"}]},{default:a(()=>[e(r,{value:l(t).server,"onUpdate:value":n[3]||(n[3]=u=>l(t).server=u)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(s,{label:"状态",name:"status"},{default:a(()=>[e(r,{value:l(t).status,"onUpdate:value":n[4]||(n[4]=u=>l(t).status=u)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(s,{label:"节点限速(Mb)",name:"nodeSpeedlimit"},{default:a(()=>[e(m,{value:l(t).nodeSpeedlimit,"onUpdate:value":n[5]||(n[5]=u=>l(t).nodeSpeedlimit=u),min:0},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(s,{label:"节点类型",name:"sort"},{default:a(()=>[e(w,{value:l(t).sort,"onUpdate:value":n[6]||(n[6]=u=>l(t).sort=u)},{default:a(()=>[e(p,{value:"0"},{default:a(()=>[o(" Shadowsocks ")]),_:1}),e(p,{value:"2"},{default:a(()=>[o(" SSH ")]),_:1}),e(p,{value:"5"},{default:a(()=>[o(" Anyconnect ")]),_:1}),e(p,{value:"9"},{default:a(()=>[o(" Shadowsocks 单端口多用户 ")]),_:1}),e(p,{value:"10"},{default:a(()=>[o(" Shadowsocks 中转 ")]),_:1}),e(p,{value:"11"},{default:a(()=>[o(" V2ray ")]),_:1}),e(p,{value:"12"},{default:a(()=>[o(" V2ray 中转 ")]),_:1}),e(p,{value:"14"},{default:a(()=>[o(" Trojan ")]),_:1}),e(p,{disabled:"",value:"999"},{default:a(()=>[o(" 系统保留 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(s,{label:"节点描述",name:"info"},{default:a(()=>[e(r,{value:l(t).info,"onUpdate:value":n[7]||(n[7]=u=>l(t).info=u)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(s,{label:"节点等级",name:"nodeClass"},{default:a(()=>[e(r,{value:l(t).nodeClass,"onUpdate:value":n[8]||(n[8]=u=>l(t).nodeClass=u)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(s,{label:"节点分组",name:"nodeGroup"},{default:a(()=>[e(m,{value:l(t).nodeGroup,"onUpdate:value":n[9]||(n[9]=u=>l(t).nodeGroup=u),"default-value":0},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(i,{span:12},{default:a(()=>[e(s,{label:"节点流量上限(GB)",name:"nodeBandwidthLimit"},{default:a(()=>[e(r,{value:l(t).nodeBandwidthLimit,"onUpdate:value":n[10]||(n[10]=u=>l(t).nodeBandwidthLimit=u)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:a(()=>[e(s,{label:"节点流量清空日",name:"bandwidthlimitResetday"},{default:a(()=>[e(m,{value:l(t).bandwidthlimitResetday,"onUpdate:value":n[11]||(n[11]=u=>l(t).bandwidthlimitResetday=u),min:0},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"]),P("div",X,[e(R,{size:"middle"},{default:a(()=>[e(y,{onClick:n[12]||(n[12]=u=>b(0))},{default:a(()=>[o(" 取消 ")]),_:1}),e(y,{type:"primary",onClick:N},{default:a(()=>[o($(d.nodeId?"保存":"添加"),1)]),_:1})]),_:1})])])}}});export{te as _,ae as d,ee as n};

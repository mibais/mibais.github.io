import{_ as V}from"./index.vue_vue_type_script_setup_true_lang-ChuEzVa1.js";import{d as F,N as Y,O as M,aa as U,ab as j,aL as H,V as O,m as $,F as A,a9 as E,a0 as G,an as J}from"./antd-DWod4DQe.js";import{c as L}from"./code-Bc9ojHa1.js";import{d as P,f as m,r as Q,o as R,a5 as i,ac as N,ad as e,k as a,u as t,G as f,a3 as I,F as b,ag as C,af as q,a8 as K}from"./vue-DIvP5FMT.js";import"./index-BhAGI5mP.js";import"./context-BiCfceRa.js";const W=K("span",{"text-20px":"","line-height-32px":"","mr-12px":"","mb-0":"",truncate:"","font-600":""},"购买记录管理",-1),le=P({__name:"index",setup(X){const r=m(!1),z=m([{title:"#",dataIndex:"id"},{title:"平台",dataIndex:"code"},{title:"金额",dataIndex:"number"},{title:"用户id",dataIndex:"userId"},{title:"发起日期",dataIndex:"datetime"},{title:"状态",dataIndex:"used"},{title:"交易号",dataIndex:"tradeNo"},{title:"平台交易号",dataIndex:"outTradeNo"}]),y=m(),s=Q({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,showQuickJumper:!0,showTotal:l=>`${l}条记录`,onChange(l,o){s.pageSize=o,s.current=l,g()}}),n=m({});async function g(){if(!r.value){r.value=!0;try{const{data:l}=await L({size:s.pageSize,current:s.current,param:n.value});y.value=l.records,s.total=l.total,s.pageSize=l.size,s.current=l.current}finally{r.value=!1}}}return R(()=>{g()}),(l,o)=>{const x=Y,p=M,d=U,c=j,T=H,w=O,S=$,h=A,v=E,k=G,B=J,D=V;return i(),N(D,null,{title:e(()=>[W]),default:e(()=>[a(v,{"mb-4":""},{default:e(()=>[a(h,{modal:t(n)},{default:e(()=>[a(c,{gutter:16},{default:e(()=>[a(d,{span:8},{default:e(()=>[a(p,{label:"用户名",name:"userName"},{default:e(()=>[a(x,{value:t(n).userName,"onUpdate:value":o[0]||(o[0]=u=>t(n).userName=u)},null,8,["value"])]),_:1})]),_:1}),a(d,{span:8},{default:e(()=>[a(p,{label:"交易单号",name:"tradeNo"},{default:e(()=>[a(x,{value:t(n).tradeNo,"onUpdate:value":o[1]||(o[1]=u=>t(n).tradeNo=u)},null,8,["value"])]),_:1})]),_:1}),a(d,{span:8},{default:e(()=>[a(p,{label:"平台交易单号",name:"outTradeNo"},{default:e(()=>[a(x,{value:t(n).outTradeNo,"onUpdate:value":o[2]||(o[2]=u=>t(n).outTradeNo=u)},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(c,{gutter:16},{default:e(()=>[a(d,{span:8},{default:e(()=>[a(p,{label:"充值日期"},{default:e(()=>[a(T,{placeholder:["开始日期","结束日期"],onChange:o[3]||(o[3]=(u,_)=>{t(n).startDateTime=_[0],t(n).endDateTime=_[1]})})]),_:1})]),_:1})]),_:1}),a(c,{span:24,style:{"text-align":"right"}},{default:e(()=>[a(d,{span:24},{default:e(()=>[a(S,{flex:"","justify-end":"","w-full":""},{default:e(()=>[a(w,{loading:t(r),type:"primary",onClick:g},{default:e(()=>[f(" 查询 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modal"])]),_:1}),a(c,{gutter:16},{default:e(()=>[a(d,{span:24},{default:e(()=>[a(v,{title:"充值记录"},{default:e(()=>[a(B,{loading:t(r),columns:t(z),"data-source":t(y),pagination:t(s),scroll:{x:100}},{bodyCell:e(({column:u,record:_})=>[u.dataIndex==="used"?(i(),I(b,{key:0},[_.used?(i(),N(k,{key:0,color:"green"},{default:e(()=>[f(" 已付款 ")]),_:1})):(i(),N(k,{key:1,color:"cyan"},{default:e(()=>[f(" 未付款 ")]),_:1}))],64)):C("",!0),u.dataIndex==="datetime"?(i(),I(b,{key:1},[f(q(t(F)(_.datetime).format("YYYY-MM-DD HH:mm")),1)],64)):C("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{le as default};

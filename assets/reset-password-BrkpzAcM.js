import{l as h}from"./login-slot-CuuDQrWi.js";import{r as y}from"./index-D_RB_XYZ.js";import{g as t}from"./tools-lgfGpGhT.js";import{d as b,f as w,r as C,o as x,ac as F,ad as s,aq as N,a5 as j,G as u,k as o,ao as B}from"./vue-DIvP5FMT.js";import{f as R}from"./index-DxqUt8yl.js";import{K as S,N as q,S as U,F as V}from"./antd-CrhK6lnF.js";import"./index.vue_vue_type_script_setup_true_lang-BUgdkkZR.js";import"./login-left-BB25wyWU.js";import"./logo-B20em0cI.js";const H=b({__name:"reset-password",setup(A){const m=N(),p=R(),l=w(),a=C({pass:"",checkPass:""});async function f(i,e){return e===""?Promise.reject("请输入密码"):(a.checkPass!==""&&l.value.validateFields("checkPass"),Promise.resolve())}async function d(i,e){return e===""?Promise.reject("你再次输入密码"):e!==a.pass?Promise.reject("两次密码不一样"):Promise.resolve()}const _={pass:[{required:!0,validator:f,trigger:"change"}],checkPass:[{validator:d,trigger:"change"}]},P={labelCol:{span:8},wrapperCol:{span:16}};async function v(){await y({email:t("email"),code:t("code"),newPassword:a.pass}),p.success({message:"密码重置成功",description:"你现在可以使用新密码登陆",duration:3,onClose(){m.push({path:"/login",replace:!0})}})}return x(()=>{!t("email")||t("code")}),(i,e)=>{const c=S,r=q,k=U,g=V;return j(),F(h,null,{title:s(()=>[u(" 正在重置密码 ")]),default:s(()=>[o(g,B({ref_key:"formRef",ref:l,name:"custom-validation",model:a,rules:_},P,{onFinish:v}),{default:s(()=>[o(r,{"has-feedback":"",label:"新密码",name:"pass"},{default:s(()=>[o(c,{value:a.pass,"onUpdate:value":e[0]||(e[0]=n=>a.pass=n),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),o(r,{"has-feedback":"",label:"确认密码",name:"checkPass"},{default:s(()=>[o(c,{value:a.checkPass,"onUpdate:value":e[1]||(e[1]=n=>a.checkPass=n),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),o(r,null,{default:s(()=>[o(k,{block:"","html-type":"submit",type:"primary"},{default:s(()=>[u(" 确认重置 ")]),_:1})]),_:1})]),_:1},16,["model"])]),_:1})}}});export{H as default};

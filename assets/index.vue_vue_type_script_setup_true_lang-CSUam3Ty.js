import{s as c,a as i,w as v}from"./index-CDfL52KE.js";import{d as S,s as _,a5 as w,a3 as y}from"./vue-BVKynzoK.js";var g=(e=>(e.alipay="alipay",e.wechat="wechat",e.paypal="paypal",e))(g||{});function A(e){return c("/payment/process",e,{customDev:!0})}function D(e){return c("/payment/payStatus",{tradeNo:e},{customDev:!0})}function E(e){return c("/payment/createOrder",e,{customDev:!0})}function h(e){return c("/sse/closeSse",e,{customDev:!0})}const $=S({__name:"index",emits:["receiveMsg"],setup(e,{expose:p,emit:l}){const m=l,r=_();async function d(t,a){var o;if(window.EventSource){const n=(o=i().userInfo)==null?void 0:o.id;r.value=new EventSource(`${v}/sse/create/chargeEvent?tradeNo=${t}&userId=${n}&businessCode=${a}`),r.value.onmessage=function(s){s.data&&m("receiveMsg",s.data)},r.value.onerror=s=>{}}}async function f(t,a){var n,s;const o=i();(n=r.value)==null||n.close();const u={businessCode:t,businessId:a,userId:(s=o.userInfo)==null?void 0:s.id};await h(u)}return p({createSse:d,closeSse:f}),(t,a)=>(w(),y("div"))}});export{g as P,$ as _,E as a,A as c,D as p};

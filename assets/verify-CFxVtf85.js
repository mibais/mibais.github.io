import{m as p,n as _,o as v}from"./index-D_RB_XYZ.js";import{v as y}from"./index-BOV0_w6M.js";import{g}from"./tools-lgfGpGhT.js";import{g as h,f as w}from"./index-DxqUt8yl.js";import{d as k,f as r,o as x,a5 as A,ac as C,ad as c,k as d,u as n,G as S}from"./vue-DIvP5FMT.js";import{W as N,J as V}from"./antd-CrhK6lnF.js";const J=k({__name:"verify",setup(b){const f=h(),o=w(),e=r(!1),s=r(0);async function u(a){if(!e.value){e.value=!0;try{const{data:i}=await p({code:a});f.value=i.token;const t=g("redirect","/");o.success({message:"验证成功",description:"不错~，即将为你跳转到用户主页",duration:3,onClose(){window.location.href=t}})}finally{e.value=!1}}}async function m(){const{data:a}=await _();s.value=a}async function l(){await v(),o.success({message:"发送成功",description:"验证邮件已重新发送~",duration:3})}return x(()=>{m()}),(a,i)=>{const t=V;return A(),C(y,{immediate:n(s),resend:!0,"verify-loading":n(e),onHandleResend:l,onHandleSubmit:u},{title:c(()=>[d(n(N)),S(" 验证邮箱 ")]),head:c(()=>[d(t,{message:"请发送验证码并前往邮箱获取验证码，输入到此处。",type:"info","show-icon":""})]),_:1},8,["immediate","verify-loading"])}}});export{J as default};

import{f as D,g as N}from"./shop-HJQcX4a9.js";import{u as q}from"./index-CosWhGyj.js";import{N as L,O as P,aa as V,aJ as A,aK as G,av as M,ab as z,F,aS as O,V as T,m as E}from"./antd-9nlSCyVV.js";import{d as J,f as b,o as K,a5 as R,a3 as $,k as e,ad as t,u as o,G as r,a8 as j,af as H}from"./vue-BVKynzoK.js";const Q={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},h=J({__name:"edit",props:{shopId:{type:Number,default:0}},emits:["handleClose"],setup(f,{emit:x}){const _=f,y=x,m=b(!0),n=b({id:void 0,name:"",price:0,unitPrice:0,autoResetBandwidth:0,status:1,content:{grade:0,resetDay:30,speedLimit:0,connector:0}});function c(p){y("handleClose",p)}async function w(){await D(n.value);const p=q();_.shopId?p.success("修改成功"):p.success("添加成功"),c(1)}async function U(){const{data:p}=await N(_.shopId);n.value=p,m.value=!1}return K(()=>{_.shopId&&U(),m.value=!1}),(p,a)=>{const S=L,u=P,s=V,v=A,B=G,d=M,i=z,C=F,I=O,g=T,k=E;return R(),$("div",null,[e(I,{spinning:o(m)},{default:t(()=>[e(C,{model:o(n),layout:"vertical"},{default:t(()=>[e(i,{gutter:16},{default:t(()=>[e(s,{span:8},{default:t(()=>[e(u,{label:"商品名",name:"name",rules:[{required:!0,message:"商品名不能为空"}]},{default:t(()=>[e(S,{value:o(n).name,"onUpdate:value":a[0]||(a[0]=l=>o(n).name=l)},null,8,["value"])]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(u,{label:"状态",name:"status",rules:[{required:!0,message:"请选择"}]},{default:t(()=>[e(B,{value:o(n).status,"onUpdate:value":a[1]||(a[1]=l=>o(n).status=l)},{default:t(()=>[e(v,{value:1},{default:t(()=>[r(" 上架 ")]),_:1}),e(v,{value:0},{default:t(()=>[r(" 下架 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(u,{label:"价格",name:"price",rule:[{require:!0,message:"价格不能为空"}]},{default:t(()=>[e(d,{value:o(n).price,"onUpdate:value":a[2]||(a[2]=l=>o(n).price=l),min:0,"addon-after":"元"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:16},{default:t(()=>[e(s,{span:8},{default:t(()=>[e(u,{label:"单价",name:"unitPrice",rule:[{require:!0,message:"单价不能为空"}]},{default:t(()=>[e(d,{value:o(n).unitPrice,"onUpdate:value":a[3]||(a[3]=l=>o(n).unitPrice=l),"addon-after":"元/GB"},null,8,["value"])]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(u,{label:"等级",name:"grade"},{default:t(()=>[e(d,{value:o(n).content.grade,"onUpdate:value":a[4]||(a[4]=l=>o(n).content.grade=l)},null,8,["value"])]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(u,{label:"流量",name:"bandwidth"},{default:t(()=>[e(d,{value:o(n).content.bandwidth,"onUpdate:value":a[5]||(a[5]=l=>o(n).content.bandwidth=l),min:0,"addon-after":"GB"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:16},{default:t(()=>[e(s,{span:8},{default:t(()=>[e(u,{label:"限速",name:"speedLimit",tooltip:"0表示不限速"},{default:t(()=>[e(d,{value:o(n).content.speedLimit,"onUpdate:value":a[6]||(a[6]=l=>o(n).content.speedLimit=l),"addon-after":"Mb"},null,8,["value"])]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(u,{label:"设备数",name:"connector",tooltip:"限制同时可使用的设备数"},{default:t(()=>[e(d,{value:o(n).content.connector,"onUpdate:value":a[7]||(a[7]=l=>o(n).content.connector=l),"addon-after":"台"},null,8,["value"])]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(u,{label:"有效期",tooltip:"0表示永久有效",name:"expire"},{default:t(()=>[e(d,{value:o(n).content.expire,"onUpdate:value":a[8]||(a[8]=l=>o(n).content.expire=l),"addon-after":"天"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:16},{default:t(()=>[e(s,{span:8},{default:t(()=>[e(u,{label:"重置周期",name:"resetDay"},{default:t(()=>[e(d,{value:o(n).content.resetDay,"onUpdate:value":a[9]||(a[9]=l=>o(n).content.resetDay=l),"addon-after":"天"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"]),j("div",Q,[e(k,{size:"middle"},{default:t(()=>[e(g,{onClick:a[10]||(a[10]=l=>c(0))},{default:t(()=>[r(" 取消 ")]),_:1}),e(g,{type:"primary",onClick:w},{default:t(()=>[r(H(f.shopId?"保存":"添加"),1)]),_:1})]),_:1})])])}}});export{h as _};

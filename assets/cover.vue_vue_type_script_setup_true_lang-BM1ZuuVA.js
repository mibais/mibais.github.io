import{_ as $}from"./coverEdit.vue_vue_type_script_setup_true_lang-B0vH0zFe.js";import{b as N,c as B}from"./shop-By_UlpNs.js";import{u as V}from"./index-BfYayhMd.js";import{aQ as A,V as O,m as Q,aw as D,an as E,am as F}from"./antd-DWod4DQe.js";import{d as T,f as i,r as G,o as H,a5 as m,a3 as J,k as s,ad as a,G as _,ac as y,u as l,ag as C,ak as R,H as U,F as j}from"./vue-DIvP5FMT.js";const Y=T({__name:"cover",setup(q){const c=i(!1),o=i(!1),k=i([{title:"#",dataIndex:"coverId",key:"coverId"},{title:"名称",dataIndex:"shopName",key:"shopName"},{title:"价格",dataIndex:"price",key:"price"},{title:"周期",dataIndex:"cycle",key:"cycle"},{title:"排序",dataIndex:"orderIndex",key:"orderIndex"},{title:"操作",dataIndex:"action",key:"action",width:200}]),f=i(),t=G({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`${e}条记录`,onChange(e,n){t.pageSize=n,t.current=e,u()}});async function u(){if(!c.value){c.value=!0;try{const{data:e}=await N({size:t.pageSize,current:t.current});f.value=e.records,t.total=e.total,t.pageSize=e.size,t.current=e.current}finally{c.value=!1}}}async function x(e){await B(e),V().success("封页删除成功",2),await u()}const d=i();function I(e){d.value=e.coverId,o.value=!0}function w(){d.value=void 0,o.value=!0}function h(e){o.value=!1,e&&u()}return H(()=>{u()}),(e,n)=>{const p=O,v=Q,z=D,b=E,S=F;return m(),J(j,null,[s(v,{"mb-5":""},{default:a(()=>[s(p,{type:"primary",onClick:w},{default:a(()=>[_(" 添加 ")]),_:1})]),_:1}),s(b,{loading:l(c),columns:l(k),"data-source":l(f),pagination:l(t),scroll:{x:100},"expand-column-width":100},{bodyCell:a(({column:r,record:g})=>[r.dataIndex==="action"?(m(),y(v,{key:0},{default:a(()=>[s(p,{type:"primary",onClick:M=>I(g)},{default:a(()=>[_(" 编辑 ")]),_:2},1032,["onClick"]),s(z,{title:"确定要删除封页吗？",onConfirm:M=>x(g.coverId)},{icon:a(()=>[s(l(A))]),default:a(()=>[s(p,{type:"primary",danger:""},{default:a(()=>[_(" 删除 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):C("",!0)]),_:1},8,["loading","columns","data-source","pagination"]),s(S,{open:l(o),"onUpdate:open":n[0]||(n[0]=r=>U(o)?o.value=r:null),closable:!1,"mask-closable":!1,onCancel:n[1]||(n[1]=r=>o.value=!1),onOk:n[2]||(n[2]=r=>o.value=!1)},{footer:a(()=>[]),default:a(()=>[l(o)?(m(),y(R($),{key:0,"cover-id":l(d),onCloseModal:h},null,40,["cover-id"])):C("",!0)]),_:1},8,["open"])],64)}}});export{Y as _};

import{d as C,an as b,am as B}from"./antd-9nlSCyVV.js";import{b as N,B as M}from"./bought--YII-ach.js";import{d as Y,f as r,r as D,o as V,a5 as i,ac as $,ad as h,k as j,u as a,a3 as d,F as c,G as l,af as m,ag as p}from"./vue-BVKynzoK.js";const q=Y({__name:"bought",props:{user:{type:Object,required:!0}},emits:["close"],setup(g,{emit:y}){var x;const I=y,w=g,n=r(!1),S=r([{title:"#",dataIndex:"id"},{title:"商品名",dataIndex:"shopName"},{title:"购买日期",dataIndex:"datetime"},{title:"自动续费",dataIndex:"renew"},{title:"价格",dataIndex:"price"},{title:"状态",dataIndex:"status"}]),f=r(),t=D({pageSize:5,current:1,total:0,pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`${e}条记录`,onChange(e,o){t.pageSize=o,t.current=e,_()}}),k=r({userId:(x=w.user)==null?void 0:x.id});async function _(){if(!n.value){n.value=!0;try{const{data:e}=await N({size:t.pageSize,current:t.current,param:k.value});f.value=e.records,t.total=e.total,t.pageSize=e.size,t.current=e.current}finally{n.value=!1}}}return V(()=>{_()}),(e,o)=>{const z=b,v=B;return i(),$(v,{title:`${g.user.userName}的购买记录`,open:!0,width:1e3,onCancel:o[0]||(o[0]=s=>I("close"))},{default:h(()=>[j(z,{loading:a(n),columns:a(S),"data-source":a(f),pagination:a(t),scroll:{x:100}},{bodyCell:h(({column:s,record:u})=>[s.dataIndex==="datetime"?(i(),d(c,{key:0},[l(m(a(C)(u.datetime).format("YYYY-MM-DD")),1)],64)):p("",!0),s.dataIndex==="renew"?(i(),d(c,{key:1},[l(m(u.renew?"开启":"关闭"),1)],64)):p("",!0),s.dataIndex==="status"?(i(),d(c,{key:2},[l(m(a(M)[u.status]),1)],64)):p("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1},8,["title"])}}});export{q as _};

import{l as O}from"./login-slot-DtQ90mMj.js";import{g as P,n as U,q as h}from"./index-BlNNMF3U.js";import{g as N}from"./tools-D3eza4ch.js";import{W as q,U as z,E as V,G as f,X as A,Y as B,K as F,N as L,O as G,Q as I,V as M,m as Q,F as S}from"./antd-D-bStUmV.js";import{d as E,f as m,o as K,ac as g,ad as o,a5 as v,G as d,k as e,u as a,ag as R}from"./vue-BVKynzoK.js";import"./index.vue_vue_type_script_setup_true_lang-uIpI4K1U.js";import"./login-left-mbuOX1uS.js";import"./logo-B20em0cI.js";const Z=E({__name:"register",setup(T){const u=m(""),l=m(!1),w=P(),t=m({username:"",email:"",password:"",confirmPassword:"",inviteCode:""});async function y(){if(!l.value){l.value=!0;try{await h(t.value),w.success({message:"注册成功",description:"即将跳转前登陆页",duration:2,onClose(){window.location.href="/login"}})}finally{l.value=!1}}}async function x(){const r=N("code");if(r){t.value.inviteCode=r;const{data:n}=await U(r);u.value=n}}return K(()=>{x()}),(r,n)=>{const b=F,p=L,i=G,_=I,c=M,k=Q,C=S;return v(),g(O,null,{title:o(()=>[d(" 开始注册 ")]),default:o(()=>[e(C,{layout:"horizontal","label-col":{style:{width:"80px"}},model:a(t),onFinish:y},{default:o(()=>[a(u)?(v(),g(b,{key:0,"mb-24px":"",message:`你正在由 ${a(u)} 推荐`,type:"success","show-icon":""},{icon:o(()=>[e(a(q))]),_:1},8,["message"])):R("",!0),e(i,{label:"昵称",name:"username"},{default:o(()=>[e(p,{value:a(t).username,"onUpdate:value":n[0]||(n[0]=s=>a(t).username=s),placeholder:"你的昵称"},{prefix:o(()=>[e(a(z))]),_:1},8,["value"])]),_:1}),e(i,{label:"邮箱",name:"email",rules:[{required:!0,message:"请补全邮箱"}]},{default:o(()=>[e(p,{value:a(t).email,"onUpdate:value":n[1]||(n[1]=s=>a(t).email=s),placeholder:"输入邮箱"},{prefix:o(()=>[e(a(V))]),_:1},8,["value"])]),_:1}),e(i,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:o(()=>[e(_,{value:a(t).password,"onUpdate:value":n[2]||(n[2]=s=>a(t).password=s),placeholder:"输入密码"},{prefix:o(()=>[e(a(f))]),_:1},8,["value"])]),_:1}),e(i,{label:"确认密码",name:"confirmPassword",rules:[{required:!0,message:"请再次输入密码"}]},{default:o(()=>[e(_,{value:a(t).confirmPassword,"onUpdate:value":n[3]||(n[3]=s=>a(t).confirmPassword=s),placeholder:"再次输入密码"},{prefix:o(()=>[e(a(f))]),_:1},8,["value"])]),_:1}),e(k,{"ml-5":"",size:"large",wrap:""},{default:o(()=>[e(c,{type:"primary","html-type":"submit",size:"large",loading:a(l)},{icon:o(()=>[e(a(A))]),default:o(()=>[d(" 立即注册 ")]),_:1},8,["loading"]),e(c,{type:"default",size:"large",href:"/login"},{icon:o(()=>[e(a(B))]),default:o(()=>[d(" 返回登陆 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}});export{Z as default};

import{_ as h,k as w,A as v}from"./index-CDfL52KE.js";import{d as f,s as u,o as k,m as x,A as b,a5 as d,a3 as m,f as C,k as V,u as p,H as B,ac as R,ad as A,G as S,af as E,ag as G,F as P}from"./vue-BVKynzoK.js";import{V as T}from"./antd-D-bStUmV.js";const q=f({__name:"geetest-captcha",props:{captchaId:{type:String,required:!0},load:{type:Boolean,default:!1}},emits:["verify","update:load"],setup(s,{expose:r,emit:c}){const i=s,n=c,a=u();function o(){window.initGeetest4({captchaId:i.captchaId,product:"bind"},function(e){e.onReady(()=>{n("update:load",!0),a.value=e,e.onSuccess(()=>{n("verify",e.getValidate())})})})}function l(){a.value.showCaptcha()}return r({showCaptcha:l}),k(async()=>{(window.initGeetest4===null||!window.initGeetest4)&&await h(()=>import("https://static.geetest.com/v4/gt4.js"),__vite__mapDeps([])),o()}),(e,t)=>x((d(),m("div",null,null,512)),[[b,!1]])}}),D="c59eeefda54b5a5789869ede615321a3",I=f({__name:"geetest",props:{loginParam:{type:Object,required:!0},loginText:{type:String,required:!0}},emits:["submit"],setup(s,{emit:r}){const c=s,i=u(),n=r,a=u(!1),o=C(!1);async function l(e){a.value=!0;try{const{data:t}=await w({...c.loginParam,type:"captcha",extra:e});n("submit",t.code!=="0"?!1:t.token)}catch(t){t instanceof v&&n("submit",!1)}finally{a.value=!1}}return(e,t)=>{const _=q,g=T;return d(),m(P,null,[V(_,{ref_key:"geetestRef",ref:i,load:p(o),"onUpdate:load":t[0]||(t[0]=y=>B(o)?o.value=y:null),"captcha-id":D,onVerify:l},null,8,["load"]),p(o)?(d(),R(g,{key:0,block:"",type:"primary",loading:a.value,size:"large",onClick:i.value.showCaptcha},{default:A(()=>[S(E(s.loginText),1)]),_:1},8,["loading","onClick"])):G("",!0)],64)}}});export{I as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

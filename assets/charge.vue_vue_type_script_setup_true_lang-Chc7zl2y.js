import{d as N,a0 as b,an as M,am as Y}from"./antd-D-bStUmV.js";import{c as B}from"./code-CAsugQyf.js";import{d as D,f as s,r as T,o as V,a5 as a,ac as c,ad as d,k as $,u as n,a3 as x,F as y,G as u,ag as I,af as j}from"./vue-BVKynzoK.js";const q=D({__name:"charge",props:{user:{type:Object,required:!0}},emits:["close"],setup(l,{emit:k}){var _;const z=k,S=l,o=s(!1),h=s([{title:"#",dataIndex:"id"},{title:"平台",dataIndex:"code"},{title:"金额",dataIndex:"number"},{title:"用户id",dataIndex:"userId"},{title:"发起日期",dataIndex:"datetime"},{title:"状态",dataIndex:"used"},{title:"交易号",dataIndex:"tradeNo"},{title:"平台交易号",dataIndex:"outTradeNo"}]),m=s(),t=T({pageSize:5,current:1,total:0,pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`${e}条记录`,onChange(e,r){t.pageSize=r,t.current=e,p()}}),v=s({userId:(_=S.user)==null?void 0:_.id});async function p(){if(!o.value){o.value=!0;try{const{data:e}=await B({size:t.pageSize,current:t.current,param:v.value});m.value=e.records,t.total=e.total,t.pageSize=e.size,t.current=e.current}finally{o.value=!1}}}return V(()=>{p()}),(e,r)=>{const g=b,C=M,w=Y;return a(),c(w,{title:`${l.user.userName}的充值记录`,open:!0,width:1e3,onCancel:r[0]||(r[0]=i=>z("close"))},{default:d(()=>[$(C,{loading:n(o),columns:n(h),"data-source":n(m),pagination:n(t),scroll:{x:100}},{bodyCell:d(({column:i,record:f})=>[i.dataIndex==="used"?(a(),x(y,{key:0},[f.used?(a(),c(g,{key:0,color:"green"},{default:d(()=>[u(" 已付款 ")]),_:1})):(a(),c(g,{key:1,color:"cyan"},{default:d(()=>[u(" 未付款 ")]),_:1}))],64)):I("",!0),i.dataIndex==="datetime"?(a(),x(y,{key:1},[u(j(n(N)(f.datetime).format("YYYY-MM-DD HH:mm")),1)],64)):I("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1},8,["title"])}}});export{q as _};
